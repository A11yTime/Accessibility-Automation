javascript:(async()=>{let e=await(await fetch("https://cdn.jsdelivr.net/npm/selenium-webdriver@4.0.0-beta.3/dist/selenium-webdriver.min.js")).text();eval(e);let t=await new Builder().forBrowser("chrome").build(),n=0,r=0,o=[];try{await t.get("http://example.com");const e=await t.findElements(By.css("button, [href], input[type='button'], input[type='submit'], input[type='image'], select, textarea")),a=await t.findElements(By.css("button, [href], input:not([type='hidden']):not([type='button']):not([type='submit']):not([type='image']), select, textarea, [tabindex]:not([tabindex='-1'])")),c=e.filter(t=>a.includes(t));if(c.length>0){console.error("%cError: The following elements are available with both mouse click and Tab/Enter key:","color:red;font-weight:bold;");for(const e of c){const t=await e.getTagName(),n=await e.getAttribute("outerHTML");console.error(`%c${t} ${n}`,"color:red;")}r++}else n++;const i=await t.findElements(By.css("input, select, textarea"));for(const e of i){const n=await e.getTagName(),r=await e.getAttribute("aria-label"),a=await e.getAttribute("aria-labelledby"),c=await t.executeScript("return arguments[0].labels[0].textContent",e).catch(()=>null);if(!r&&!a&&!c){console.error("%cError: Input element is missing label text, aria-label, or aria-labelledby:","color:red;font-weight:bold;");const t=await e.getAttribute("outerHTML");console.error(`%c${n} ${t}`,"color:red;"),r++,o.push({tagName:n,outerHTML:t})}else n++}const a=await t.findElements(By.css("img:not([alt])"));if(a.length>0){console.error("%cError: The following images are missing alternative text:","color:red;font-weight:bold;");for(const e of a){const t=await e.getTagName(),n=await e.getAttribute("outerHTML");console.error(`%c${t} ${n}`,"color:red;"),r++,o.push({tagName:t,outerHTML:n})}}else n++;const c=await t.findElements(By.css("a, button, [tabindex='0']"));for(const e of c){const n=await e.getTagName(),r=await e.getText(),a=await e.getAttribute("aria-label"),c=await e.getAttribute("aria-labelledby"),i=await e.getAttribute("aria-describedby");if(!r&&!a&&!c&&!i){console.error("%cError: Element is missing text, aria-label, aria-labelledby, or aria-describedby:","color:red;font-weight:bold;");const t=await e.getAttribute("outerHTML");console.error(`%c${n} ${t}`,"color:red;"),r++,o.push({tagName:n,outerHTML:t})}else n++}const i=await t.findElements(By.xpath("//*[normalize-space() and not(self::script)]"));for(const e of i){const n=await e.getCssValue("color"),r=await e.getCssValue("background-color"),a=getContrastRatio(n,r);if(a<4.5){console.error("%cError: Element does not meet proper contrast ratio (minimum required: 4.5):","color:red;font-weight:bold;");const t=await e.getTagName(),n=await e.getAttribute("outerHTML");console.error(`%c${t} ${n}`,"color:red;"),r++,o.push({tagName:t,outerHTML:n})}else n++}console.log(`%cTests Passed: ${n}`,"color:green;font-weight:bold;"),console.log(`%cTests Failed: ${r}`,"color:red;font-weight:bold;"),o.length>0&&(console.log("%cFailed Elements:","color:red;font-weight:bold;"),o.forEach((e,t)=>{console.log(`${t+1}. ${e.tagName} - ${e.outerHTML}`)}))}finally{await t.quit()}})();
